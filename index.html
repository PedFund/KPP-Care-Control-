<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPP Care Control</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
        <div id="login-screen" class="screen">
            <div class="login-container">
                <h1>üèÉ KPP Care Control</h1>
                <p class="subtitle">–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
                <form id="login-form">
                    <input type="text" id="login-username" placeholder="–õ–æ–≥–∏–Ω" required autocomplete="username">
                    <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" required autocomplete="current-password">
                    <button type="submit">–í–æ–π—Ç–∏</button>
                </form>
                <p class="hint">–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å - –æ–Ω–∏ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã</p>
            </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div id="user-screen" class="screen hidden">
            <header class="app-header">
                <h2 id="user-welcome">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <button id="logout-btn" class="btn-secondary">–í—ã–π—Ç–∏</button>
            </header>

            <nav class="tabs">
                <button class="tab-btn active" data-tab="summary">üìä –°–≤–æ–¥–∫–∞</button>
                <button class="tab-btn" data-tab="steps">üö∂ –®–∞–≥–∏</button>
                <button class="tab-btn" data-tab="morningExercise">üßò –ó–∞—Ä—è–¥–∫–∞</button>
                <button class="tab-btn" data-tab="abs">üí™ –ü—Ä–µ—Å—Å</button>
                <button class="tab-btn" data-tab="workout">üèãÔ∏è –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</button>
                <button class="tab-btn" data-tab="water">üíß –í–æ–¥–∞</button>
                <button class="tab-btn" data-tab="nutrition">üçΩÔ∏è –ü–∏—Ç–∞–Ω–∏–µ</button>
            </nav>

            <main class="content">
                <!-- –í–∫–ª–∞–¥–∫–∞: –°–≤–æ–¥–∫–∞ -->
                <section id="tab-summary" class="tab-content active">
                    <div class="summary-grid">
                        <div class="summary-card">
                            <h3>–°–µ–≥–æ–¥–Ω—è</h3>
                            <p class="date-display" id="today-date"></p>
                        </div>
                        <div class="summary-card">
                            <h3>üö∂ –ù–æ—Ä–º–∞ —à–∞–≥–æ–≤</h3>
                            <p class="big-number" id="current-goal">‚Äî</p>
                        </div>
                        <div class="summary-card">
                            <h3>üìà –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–µ–≥–æ–¥–Ω—è</h3>
                            <p class="big-number" id="today-steps">‚Äî</p>
                            <div class="progress-bar">
                                <div class="progress-fill" id="steps-progress"></div>
                            </div>
                        </div>
                        <div class="summary-card checklist">
                            <h3>‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–Ω—è</h3>
                            <div class="checklist-items" id="daily-checklist"></div>
                        </div>
                    </div>

                    <div class="missing-days" id="missing-days-alert"></div>

                    <div class="input-section">
                        <h3>–í–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                        <form id="today-form" class="compact-form">
                            <div class="form-row">
                                <label>
                                    –í—Å–µ–≥–æ —à–∞–≥–æ–≤
                                    <input type="number" id="input-total-steps" min="0" placeholder="0">
                                </label>
                                <label>
                                    –®–∞–≥–æ–≤ –Ω–∞ –¥–æ—Ä–æ–∂–∫–µ
                                    <input type="number" id="input-treadmill-steps" min="0" placeholder="0">
                                </label>
                            </div>
                            <div class="form-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="input-morningExercise">
                                    –ó–∞—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
                                </label>                                 
                                <label class="checkbox-label">
                                    <input type="checkbox" id="input-workout">
                                    –ë—ã–ª–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="input-abs">
                                    –ü—Ä–µ—Å—Å —Å–¥–µ–ª–∞–Ω
                                </label>
                            </div>
                            <div class="form-row">
                                <label>
                                    –ü–∏—Ç–∞–Ω–∏–µ
                                    <select id="input-nutrition">
                                        <option value="2">–°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏–µ</option>
                                        <option value="1">–ù–µ–±–æ–ª—å—à–æ–µ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏–µ</option>
                                        <option value="0" selected>–ü–æ –ø–ª–∞–Ω—É</option>
                                        <option value="-1">–ù–µ–±–æ–ª—å—à–æ–µ –Ω–µ–¥–æ–µ–¥–∞–Ω–∏–µ</option>
                                        <option value="-2">–°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–µ–¥–æ–µ–¥–∞–Ω–∏–µ</option>
                                    </select>
                                </label>
                                <label>
                                    –í–æ–¥–∞
                                    <select id="input-water">
                                        <option value="0">&lt;250 –º–ª</option>
                                        <option value="1">250‚Äì500 –º–ª</option>
                                        <option value="2">500‚Äì750 –º–ª</option>
                                        <option value="3" selected>750‚Äì1000 –º–ª</option>
                                        <option value="4">1‚Äì1.5 –ª</option>
                                        <option value="5">1.5‚Äì2 –ª</option>
                                        <option value="6">&gt;2 –ª</option>
                                    </select>
                                </label>
                            </div>
                            <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </form>
                    </div>
                </section>

                <!-- –í–∫–ª–∞–¥–∫–∞: –®–∞–≥–∏ -->
                <section id="tab-steps" class="tab-content">
                    <div class="stats-header">
                        <h3>–ò—Å—Ç–æ—Ä–∏—è —à–∞–≥–æ–≤</h3>
                        <div class="stats-summary" id="steps-stats"></div>
                    </div>
                    <div class="history-container" id="steps-history"></div>
                </section>
                
                <!-- –í–∫–ª–∞–¥–∫–∞: –ó–∞—Ä—è–¥–∫–∞ -->
                <section id="tab-morningExercise" class="tab-content">
                    <div class="stats-header">
                        <h3>–ò—Å—Ç–æ—Ä–∏—è –∑–∞—Ä—è–¥–∫–∏</h3>
                        <div class="stats-summary" id="morningExercise-stats"></div>
                    </div>
                    <div class="history-container" id="morningExercise-history"></div>
                </section>

                <!-- –í–∫–ª–∞–¥–∫–∞: –ü—Ä–µ—Å—Å -->
                <section id="tab-abs" class="tab-content">
                    <div class="stats-header">
                        <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ—Å—Å–∞</h3>
                        <div class="stats-summary" id="abs-stats"></div>
                    </div>
                    <div class="history-container" id="abs-history"></div>
                </section>

                <!-- –í–∫–ª–∞–¥–∫–∞: –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ -->
                <section id="tab-workout" class="tab-content">
                    <div class="stats-header">
                        <h3>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h3>
                        <div class="stats-summary" id="workout-stats"></div>
                    </div>
                    <div class="history-container" id="workout-history"></div>
                </section>

                <!-- –í–∫–ª–∞–¥–∫–∞: –í–æ–¥–∞ -->
                <section id="tab-water" class="tab-content">
                    <div class="stats-header">
                        <h3>–ò—Å—Ç–æ—Ä–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –≤–æ–¥—ã</h3>
                        <div class="stats-summary" id="water-stats"></div>
                    </div>
                    <div class="history-container" id="water-history"></div>
                </section>

                <!-- –í–∫–ª–∞–¥–∫–∞: –ü–∏—Ç–∞–Ω–∏–µ -->
                <section id="tab-nutrition" class="tab-content">
                    <div class="stats-header">
                        <h3>–ò—Å—Ç–æ—Ä–∏—è –ø–∏—Ç–∞–Ω–∏—è</h3>
                        <div class="stats-summary" id="nutrition-stats"></div>
                    </div>
                    <div class="history-container" id="nutrition-history"></div>
                </section>
            </main>
        </div>

        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –∞–¥–º–∏–Ω–∞ -->
        <div id="admin-screen" class="screen hidden">
            <header class="app-header">
                <h2>üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                <button id="admin-logout-btn" class="btn-secondary">–í—ã–π—Ç–∏</button>
            </header>

            <div class="admin-content">
                <div class="users-list" id="users-list"></div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- –ù–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="config.js"></script>
    <script src="firebase-init.js"></script>
    <script src="auth.js"></script>
    <script src="data-logic.js"></script>
    <!-- –ù–û–í–´–ô –§–ê–ô–õ -->
    <script src="measurements-logic.js"></script>
    <script src="ui.js"></script>
    <script src="app.js"></script>
</body>
</html>
