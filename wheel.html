<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–æ–ª–µ—Å–æ –±–∞–ª–∞–Ω—Å–∞ –ø–∏—Ç–∞–Ω–∏—è: –ö–ü–ü</title>
  <style>
    /* ===== –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –∏ —Å–±—Ä–æ—Å ===== */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #333;
    }

    /* ===== –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" ===== */
    .back-btn {
      margin-bottom: 20px;
      padding: 10px 18px;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      backdrop-filter: blur(5px);
      transition: background 0.3s;
    }
    .back-btn:hover { background: rgba(255, 255, 255, 0.3); }

    /* ===== –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ===== */
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      opacity: 0; /* –î–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è */
      transform: translateY(20px);
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .header h1 { font-size: 2.5em; margin-bottom: 10px; }
    .header p { font-size: 1.1em; opacity: 0.9; }

    .content { padding: 30px; }

    /* ===== –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤–æ–ø—Ä–æ—Å—ã ===== */
    .category {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 25px;
      border-left: 5px solid;
      transition: transform 0.2s;
    }
    .category:hover { transform: translateX(5px); }

    .category:nth-child(1) { border-left-color: #3498db; }
    .category:nth-child(2) { border-left-color: #e74c3c; }
    .category:nth-child(3) { border-left-color: #f39c12; }
    .category:nth-child(4) { border-left-color: #2ecc71; }
    .category:nth-child(5) { border-left-color: #9b59b6; }
    .category:nth-child(6) { border-left-color: #1abc9c; }
    .category:nth-child(7) { border-left-color: #e67e22; }

    .category-title {
      font-size: 1.5em;
      font-weight: bold;
      margin-bottom: 20px;
      color: #2c3e50;
    }

    .question {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      padding: 12px;
      background: white;
      border-radius: 8px;
      transition: background 0.2s;
    }
    .question:hover { background: #e8f4f8; }

    .question label {
      flex: 1;
      cursor: pointer;
      font-size: 1em;
      line-height: 1.5;
      user-select: none;
    }

    .question input[type="checkbox"] {
      width: 24px;
      height: 24px;
      margin-right: 15px;
      cursor: pointer;
      accent-color: #667eea;
    }

    /* ===== –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ===== */
    .button-container { text-align: center; margin: 40px 0; }

    .calculate-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 18px 60px;
      font-size: 1.3em;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      transition: all 0.3s;
      font-weight: bold;
    }
    .calculate-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
    }
    .calculate-btn:active { transform: translateY(0); }

    .reset-btn {
      background: #95a5a6;
      color: white;
      border: none;
      padding: 12px 30px;
      font-size: 1em;
      border-radius: 50px;
      cursor: pointer;
      margin-left: 15px;
      transition: all 0.3s;
    }
    .reset-btn:hover {
      background: #7f8c8d;
      transform: translateY(-2px);
    }

    /* ===== –†–µ–∑—É–ª—å—Ç–∞—Ç—ã ===== */
    .results {
      display: none;
      padding: 40px;
      background: #f8f9fa;
      border-radius: 15px;
      margin-top: 30px;
    }
    .results.show {
      display: block;
      animation: fadeIn 0.5s;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .results h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
      font-size: 2em;
    }

    .canvas-container {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
    }
    #wheelCanvas {
      max-width: 100%;
      height: auto;
    }

    .scores {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 30px;
    }

    .score-item {
      background: white;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .score-item h3 {
      font-size: 1em;
      margin-bottom: 10px;
      color: #555;
    }

    .score-item .score {
      font-size: 2em;
      font-weight: bold;
      color: #667eea;
    }

    @media (max-width: 768px) {
      .header h1 { font-size: 1.8em; }
      .category { padding: 20px; }
      .category-title { font-size: 1.3em; }
      .question { flex-direction: row; align-items: flex-start; }
      .calculate-btn { padding: 15px 40px; font-size: 1.1em; }
      .scores { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <button class="back-btn" onclick="window.location.href='/'">
    ‚Üê –ù–∞–∑–∞–¥ –∫ –∏–∑–º–µ—Ä–µ–Ω–∏—è–º
  </button>

  <div class="container">
    <div class="header">
      <h1>üéØ –ö–æ–ª–µ—Å–æ –±–∞–ª–∞–Ω—Å–∞ –ø–∏—Ç–∞–Ω–∏—è: –ö–ü–ü</h1>
      <p>–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ —É–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π –±–∞–ª–∞–Ω—Å –ø–∏—Ç–∞–Ω–∏—è</p>
    </div>

    <div class="content">
      <form id="balanceForm">
        <div class="category">
          <div class="category-title">üíß –í–æ–¥–∞</div>
          <div class="question"><input type="checkbox" id="water1" name="water"><label for="water1">–Ø –æ—Ç–ª–∏—á–∞—é –∂–∞–∂–¥—É –æ—Ç –≥–æ–ª–æ–¥–∞.</label></div>
          <div class="question"><input type="checkbox" id="water2" name="water"><label for="water2">–Ø –Ω–∞—á–∏–Ω–∞—é —É—Ç—Ä–æ —Å —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –≤–æ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="water3" name="water"><label for="water3">–Ø –ø—Ä–∞–∫—Ç–∏–∫—É—é –Ω–∞–≤—ã–∫ ¬´—Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≥–ª–æ—Ç–∫–∞¬ª.</label></div>
          <div class="question"><input type="checkbox" id="water4" name="water"><label for="water4">–Ø –ø–æ—Å–µ—â–∞—é —Ç—É–∞–ª–µ—Ç –Ω–µ –º–µ–Ω–µ–µ 4 —Ä–∞–∑ –∑–∞ –¥–µ–Ω—å.</label></div>
          <div class="question"><input type="checkbox" id="water5" name="water"><label for="water5">–ú–æ—è –º–æ—á–∞ –Ω–µ–Ω–∞—Å—ã—â–µ–Ω–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞.</label></div>
          <div class="question"><input type="checkbox" id="water6" name="water"><label for="water6">–£ –º–µ–Ω—è –Ω–µ—Ç —Å—É—Ö–æ—Å—Ç–∏ –∫–æ–∂–∏.</label></div>
          <div class="question"><input type="checkbox" id="water7" name="water"><label for="water7">–£ –º–µ–Ω—è –Ω–µ—Ç –æ—Ç–µ—á–Ω–æ—Å—Ç–∏ –≥–ª–∞–∑ —É—Ç—Ä–æ–º.</label></div>
          <div class="question"><input type="checkbox" id="water8" name="water"><label for="water8">–£ –º–µ–Ω—è –Ω–µ—Ç –∂–µ–ª–∞–Ω–∏—è –ø–∏—Ç—å –ø–æ—Å–ª–µ –µ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="water9" name="water"><label for="water9">–£ –º–µ–Ω—è –Ω–µ—Ç —Å—É—Ö–æ–≥–æ —Å—Ç—É–ª–∞ –∏–ª–∏ –∑–∞–ø–æ—Ä–æ–≤.</label></div>
          <div class="question"><input type="checkbox" id="water10" name="water"><label for="water10">–£ –º–µ–Ω—è –Ω–µ—Ç —Å—É—Ö–æ—Å—Ç–∏ —Å–ª–∏–∑–∏—Å—Ç—ã—Ö.</label></div>
        </div>

        <div class="category">
          <div class="category-title">ü•© –ë–µ–ª–æ–∫</div>
          <div class="question"><input type="checkbox" id="protein1" name="protein"><label for="protein1">–Ø —É–ø–æ—Ç—Ä–µ–±–ª—è—é –∂–∏–≤–æ—Ç–Ω—ã–π –±–µ–ª–æ–∫.</label></div>
          <div class="question"><input type="checkbox" id="protein2" name="protein"><label for="protein2">–Ø —É–ø–æ—Ç—Ä–µ–±–ª—è—é —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π –±–µ–ª–æ–∫.</label></div>
          <div class="question"><input type="checkbox" id="protein3" name="protein"><label for="protein3">–í –∫–∞–∂–¥–æ–º –ø—Ä–∏–µ–º–µ –ø–∏—â–∏ –µ—Å—Ç—å –±–µ–ª–æ–∫.</label></div>
          <div class="question"><input type="checkbox" id="protein4" name="protein"><label for="protein4">–£ –º–µ–Ω—è –Ω–µ—Ç –≥–∞–∑–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ –µ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="protein5" name="protein"><label for="protein5">–ö—Ä–∞—Å–Ω–æ–µ –º—è—Å–æ 1-2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é.</label></div>
          <div class="question"><input type="checkbox" id="protein6" name="protein"><label for="protein6">–Ø –º–∞—Ä–∏–Ω—É—é –º—è—Å–æ –ø–µ—Ä–µ–¥ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ–º.</label></div>
          <div class="question"><input type="checkbox" id="protein7" name="protein"><label for="protein7">–ò—Å–ø–æ–ª—å–∑—É—é —â–∞–¥—è—â–∏–µ —Å–ø–æ—Å–æ–±—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è.</label></div>
          <div class="question"><input type="checkbox" id="protein8" name="protein"><label for="protein8">–ù–µ—Ç —Å–æ–Ω–ª–∏–≤–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –±–µ–ª–∫–æ–≤–æ–π –ø–∏—â–∏.</label></div>
          <div class="question"><input type="checkbox" id="protein9" name="protein"><label for="protein9">–£ –º–µ–Ω—è –Ω–µ—Ç –º—ã—à–µ—á–Ω–æ–π —Å–ª–∞–±–æ—Å—Ç–∏.</label></div>
          <div class="question"><input type="checkbox" id="protein10" name="protein"><label for="protein10">–ù–µ—Ç —Ç—è–∂–µ—Å—Ç–∏ –≤ –∂–∏–≤–æ—Ç–µ –ø–æ—Å–ª–µ –µ–¥—ã.</label></div>
        </div>

        <div class="category">
          <div class="category-title">ü•ë –ñ–∏—Ä—ã</div>
          <div class="question"><input type="checkbox" id="fats1" name="fats"><label for="fats1">–Ø –µ–º –∂–∏–≤–æ—Ç–Ω—ã–µ –∂–∏—Ä—ã.</label></div>
          <div class="question"><input type="checkbox" id="fats2" name="fats"><label for="fats2">–ù–µ—Ç —Ç—Ä–∞–Ω—Å–∂–∏—Ä–æ–≤ –∏ –ø—Ä–æ–≥–æ—Ä–∫–ª—ã—Ö –º–∞—Å–µ–ª.</label></div>
          <div class="question"><input type="checkbox" id="fats3" name="fats"><label for="fats3">–ñ–∏—Ä–Ω–∞—è —Ä—ã–±–∞ 2-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é.</label></div>
          <div class="question"><input type="checkbox" id="fats4" name="fats"><label for="fats4">–ì–æ—Ç–æ–≤–ª—é –Ω–∞ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã—Ö –∂–∏—Ä–∞—Ö.</label></div>
          <div class="question"><input type="checkbox" id="fats5" name="fats"><label for="fats5">–î–æ–±–∞–≤–ª—è—é –Ω–µ—Ä–∞—Ñ–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Å–ª–∞.</label></div>
          <div class="question"><input type="checkbox" id="fats6" name="fats"><label for="fats6">–ù–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —á—É–≤—Å—Ç–≤–∞ –≥–æ–ª–æ–¥–∞.</label></div>
          <div class="question"><input type="checkbox" id="fats7" name="fats"><label for="fats7">–ù–µ—Ç —Ç—è–∂–µ—Å—Ç–∏ –ø–æ—Å–ª–µ –∂–∏—Ä–Ω–æ–π –ø–∏—â–∏.</label></div>
          <div class="question"><input type="checkbox" id="fats8" name="fats"><label for="fats8">–ù–µ—Ç –¥–µ–ø—Ä–µ—Å—Å–∏–∏/—ç–º–æ—Ü–∏–π.</label></div>
          <div class="question"><input type="checkbox" id="fats9" name="fats"><label for="fats9">–°—Ç—É–ª —Å–º—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ —Å–ª–µ–¥–æ–≤.</label></div>
          <div class="question"><input type="checkbox" id="fats10" name="fats"><label for="fats10">–í–æ–ª–æ—Å—ã –∏ –Ω–æ–≥—Ç–∏ –≤ –ø–æ—Ä—è–¥–∫–µ.</label></div>
        </div>

        <div class="category">
          <div class="category-title">üçû –£–≥–ª–µ–≤–æ–¥—ã</div>
          <div class="question"><input type="checkbox" id="carbs1" name="carbs"><label for="carbs1">–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é —Ä–∞—Ñ–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º—É–∫—É.</label></div>
          <div class="question"><input type="checkbox" id="carbs2" name="carbs"><label for="carbs2">–ù–µ—Ç –∂–∏–¥–∫–∏—Ö —É–≥–ª–µ–≤–æ–¥–æ–≤.</label></div>
          <div class="question"><input type="checkbox" id="carbs3" name="carbs"><label for="carbs3">–ù–µ—Ç —Ç—è–≥–∏ –∫ —Å–ª–∞–¥–∫–æ–º—É.</label></div>
          <div class="question"><input type="checkbox" id="carbs4" name="carbs"><label for="carbs4">–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é —Ü–µ–ª—å–Ω—ã–µ –∑–ª–∞–∫–∏.</label></div>
          <div class="question"><input type="checkbox" id="carbs5" name="carbs"><label for="carbs5">–û–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∞—Ö–∞—Ä–∞.</label></div>
          <div class="question"><input type="checkbox" id="carbs6" name="carbs"><label for="carbs6">–ù–µ –ø—Ä–æ—Å—ã–ø–∞—é—Å—å –Ω–æ—á—å—é –æ—Ç –≥–æ–ª–æ–¥–∞.</label></div>
          <div class="question"><input type="checkbox" id="carbs7" name="carbs"><label for="carbs7">–ö—Ä–∞—Ö–º–∞–ª–∏—Å—Ç—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–µ —á–∞—â–µ 3 —Ä–∞–∑/–Ω–µ–¥.</label></div>
          <div class="question"><input type="checkbox" id="carbs8" name="carbs"><label for="carbs8">–û–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Ñ–∞–±—Ä–∏—á–Ω—ã–µ —Å–æ—É—Å—ã.</label></div>
          <div class="question"><input type="checkbox" id="carbs9" name="carbs"><label for="carbs9">–û–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Å–ª–∞–¥–æ—Å—Ç–∏ –∏ –≤—ã–ø–µ—á–∫–∞.</label></div>
          <div class="question"><input type="checkbox" id="carbs10" name="carbs"><label for="carbs10">–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏.</label></div>
        </div>

        <div class="category">
          <div class="category-title">ü•ó –ö–ª–µ—Ç—á–∞—Ç–∫–∞</div>
          <div class="question"><input type="checkbox" id="fiber1" name="fiber"><label for="fiber1">–ï–º –∑–µ–ª–µ–Ω—å, –æ–≤–æ—â–∏, –∫—Ä—É–ø—ã –µ–∂–µ–¥–Ω–µ–≤–Ω–æ.</label></div>
          <div class="question"><input type="checkbox" id="fiber2" name="fiber"><label for="fiber2">–ù–µ—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –≥–æ–ª–æ–¥–∞ –ø–æ—Å–ª–µ –µ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="fiber3" name="fiber"><label for="fiber3">–û–≤–æ—â–∏ —Ä–∞–∑–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.</label></div>
          <div class="question"><input type="checkbox" id="fiber4" name="fiber"><label for="fiber4">–ü—Ä–æ–¥—É–∫—Ç—ã —Å–æ —Å–ª–∏–∑—å—é (–ª–µ–Ω, –æ–≤—Å—è–Ω–∫–∞ –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="fiber5" name="fiber"><label for="fiber5">–†–µ–∑–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –∫—Ä–∞—Ö–º–∞–ª –≤ —Ä–∞—Ü–∏–æ–Ω–µ.</label></div>
          <div class="question"><input type="checkbox" id="fiber6" name="fiber"><label for="fiber6">–ù–µ—Ç –≤–∑–¥—É—Ç–∏—è –ø–æ—Å–ª–µ –µ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="fiber7" name="fiber"><label for="fiber7">–†–µ–≥—É–ª—è—Ä–Ω—ã–π —Å—Ç—É–ª.</label></div>
          <div class="question"><input type="checkbox" id="fiber8" name="fiber"><label for="fiber8">–ù–µ—Ç –ª–∏—à–Ω–µ–≥–æ –≤–µ—Å–∞.</label></div>
          <div class="question"><input type="checkbox" id="fiber9" name="fiber"><label for="fiber9">–ù–æ—Ä–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã.</label></div>
          <div class="question"><input type="checkbox" id="fiber10" name="fiber"><label for="fiber10">–ó–¥–æ—Ä–æ–≤—ã–π —Ü–≤–µ—Ç –ª–∏—Ü–∞.</label></div>
        </div>

        <div class="category">
          <div class="category-title">üåà –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ</div>
          <div class="question"><input type="checkbox" id="variety1" name="variety"><label for="variety1">–û–≤–æ—â–∏/–∑–µ–ª–µ–Ω—å –≤ —Å–≤–µ–∂–µ–º –≤–∏–¥–µ.</label></div>
          <div class="question"><input type="checkbox" id="variety2" name="variety"><label for="variety2">–§—Ä—É–∫—Ç—ã/—è–≥–æ–¥—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ.</label></div>
          <div class="question"><input type="checkbox" id="variety3" name="variety"><label for="variety3">–†–µ–≥—É–ª—è—Ä–Ω–æ —É–ø–æ—Ç—Ä–µ–±–ª—è—é —Å–ø–µ—Ü–∏–∏.</label></div>
          <div class="question"><input type="checkbox" id="variety4" name="variety"><label for="variety4">–ú–µ–Ω—è—é –≤–∏–¥—ã –∫—Ä—É–ø.</label></div>
          <div class="question"><input type="checkbox" id="variety5" name="variety"><label for="variety5">–†–µ–≥—É–ª—è—Ä–Ω–æ –µ–º –±–æ–±–æ–≤—ã–µ.</label></div>
          <div class="question"><input type="checkbox" id="variety6" name="variety"><label for="variety6">–ú–æ–ª–æ—á–∫–∞ –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ.</label></div>
          <div class="question"><input type="checkbox" id="variety7" name="variety"><label for="variety7">–†—ã–±–∞/–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ.</label></div>
          <div class="question"><input type="checkbox" id="variety8" name="variety"><label for="variety8">–†–∞–∑–Ω—ã–µ –æ—Ä–µ—Ö–∏/—Å–µ–º–µ–Ω–∞.</label></div>
          <div class="question"><input type="checkbox" id="variety9" name="variety"><label for="variety9">–§–µ—Ä–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã.</label></div>
          <div class="question"><input type="checkbox" id="variety10" name="variety"><label for="variety10">–ü—Ä–æ–±—É—é –Ω–æ–≤—ã–µ –±–ª—é–¥–∞.</label></div>
        </div>

        <div class="category">
          <div class="category-title">‚è∞ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</div>
          <div class="question"><input type="checkbox" id="organization1" name="organization"><label for="organization1">–ù–µ –±–æ–ª—å—à–µ 3 –ø—Ä–∏–µ–º–æ–≤ –∏ 2 –ø–µ—Ä–µ–∫—É—Å–æ–≤.</label></div>
          <div class="question"><input type="checkbox" id="organization2" name="organization"><label for="organization2">–ù–µ—Ç –≥–æ–ª–æ–¥–Ω—ã—Ö –¥–Ω–µ–π.</label></div>
          <div class="question"><input type="checkbox" id="organization3" name="organization"><label for="organization3">–ï—Å—Ç—å ¬´–ø—Ä–∞–∑–¥–Ω–∏–∫ –∂–∏–≤–æ—Ç–∞¬ª —Ä–∞–∑ –≤ 1-2 –Ω–µ–¥.</label></div>
          <div class="question"><input type="checkbox" id="organization4" name="organization"><label for="organization4">–ü–µ—Ä–µ—Ä—ã–≤—ã: 3—á –¥–Ω–µ–º, 9—á –Ω–æ—á—å—é.</label></div>
          <div class="question"><input type="checkbox" id="organization5" name="organization"><label for="organization5">–ï–º –±–µ–∑ –≥–∞–¥–∂–µ—Ç–æ–≤.</label></div>
          <div class="question"><input type="checkbox" id="organization6" name="organization"><label for="organization6">–ü–ª–∞–Ω–∏—Ä—É—é –ø–∏—Ç–∞–Ω–∏–µ –∑–∞—Ä–∞–Ω–µ–µ.</label></div>
          <div class="question"><input type="checkbox" id="organization7" name="organization"><label for="organization7">–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π.</label></div>
          <div class="question"><input type="checkbox" id="organization8" name="organization"><label for="organization8">–ù–µ—Ç –µ–¥—ã –Ω–∞ –±–µ–≥—É.</label></div>
          <div class="question"><input type="checkbox" id="organization9" name="organization"><label for="organization9">–ü—Ä–∞–≤–∏–ª–æ —Ç–∞—Ä–µ–ª–∫–∏.</label></div>
          <div class="question"><input type="checkbox" id="organization10" name="organization"><label for="organization10">–ü—Ä–∞–≤–∏–ª–æ –ª–∞–¥–æ–Ω–∏.</label></div>
        </div>

        <div class="button-container">
          <button type="button" class="calculate-btn" onclick="calculateBalance()">
            üéØ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –±–∞–ª–∞–Ω—Å
          </button>
          <button type="reset" class="reset-btn" onclick="resetForm()">
            üîÑ –°–±—Ä–æ—Å–∏—Ç—å
          </button>
        </div>
      </form>

      <div id="results" class="results">
        <h2>üìä –í–∞—à–µ –∫–æ–ª–µ—Å–æ –±–∞–ª–∞–Ω—Å–∞</h2>
        <div class="canvas-container">
          <canvas id="wheelCanvas" width="600" height="600"></canvas>
        </div>
        <div class="scores" id="scoresList"></div>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <script src="config.js"></script>
  <script src="firebase-init.js"></script>
  <script src="auth.js"></script>

<script>
    // ===== –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ =====
    const categories = [
      { name: '–í–æ–¥–∞', color: '#3498db', emoji: 'üíß' },
      { name: '–ë–µ–ª–æ–∫', color: '#e74c3c', emoji: 'ü•©' },
      { name: '–ñ–∏—Ä—ã', color: '#f39c12', emoji: 'ü•ë' },
      { name: '–£–≥–ª–µ–≤–æ–¥—ã', color: '#2ecc71', emoji: 'üçû' },
      { name: '–ö–ª–µ—Ç—á–∞—Ç–∫–∞', color: '#9b59b6', emoji: 'ü•ó' },
      { name: '–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ', color: '#1abc9c', emoji: 'üåà' },
      { name: '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è', color: '#e67e22', emoji: '‚è∞' }
    ];

    let hoveredSector = null;
    let lastScores = [];
    let hoverBound = false;
    let currentUser = null; // –•—Ä–∞–Ω–∏–º —é–∑–µ—Ä–∞ –∑–¥–µ—Å—å

    const WHEEL_PADDING = 90;
    const LABEL_RADIUS_ADD = 30;

    // ===== 1. –°–ª—É—à–∞–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ) =====
    // –≠—Ç–æ—Ç –∫–æ–¥ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∞–º, –∫–∞–∫ —Ç–æ–ª—å–∫–æ Firebase "–ø—Ä–æ—Å–Ω–µ—Ç—Å—è"
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            console.log("‚úÖ –°–µ—Å—Å–∏—è –ø–æ–¥—Ö–≤–∞—á–µ–Ω–∞! ID:", user.uid);
            currentUser = user;
            
            // –í–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–∫–∞–∂–µ–º, —á—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏ —é–∑–µ—Ä–∞ (–º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –ø–æ—Ç–æ–º)
            const headerP = document.querySelector('.header p');
            headerP.innerHTML = `–ü—Ä–∏–≤–µ—Ç, <b>${user.email || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}</b>! –¢–≤–æ–π ID –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω.`;
            headerP.style.color = "#dff9fb";
        } else {
            console.warn("‚õî –°–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –í—ã —Ç–æ—á–Ω–æ –≤–æ—à–ª–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏?");
            currentUser = null;
            
            const headerP = document.querySelector('.header p');
            headerP.innerHTML = `‚ö†Ô∏è –í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è.`;
            headerP.style.color = "#ffcccc";
        }
    });

    // ===== 2. –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è =====
    function calculateBalance() {
      const form = document.getElementById('balanceForm');
      const scores = [];
      const categoryNames = ['water', 'protein', 'fats', 'carbs', 'fiber', 'variety', 'organization'];
      
      categoryNames.forEach(cat => {
        const checkboxes = form.querySelectorAll(`input[name="${cat}"]:checked`);
        scores.push(checkboxes.length);
      });

      // –†–∏—Å—É–µ–º –∫–æ–ª–µ—Å–æ
      displayResults(scores);

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ü–ï–†–ï–î —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
      if (!currentUser) {
          alert("–û—à–∏–±–∫–∞: –°–∏—Å—Ç–µ–º–∞ –Ω–µ –≤–∏–¥–∏—Ç –≤–∞—à–µ–≥–æ –≤—Ö–æ–¥–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä, –∞ –Ω–µ –∫–∞–∫ —Ñ–∞–π–ª.");
          console.error("–ü–æ–ø—ã—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");
          return;
      }

      // –°–æ—Ö—Ä–∞–Ω—è–µ–º
      const scoreObject = {
        water: scores[0], protein: scores[1], fats: scores[2],
        carbs: scores[3], fiber: scores[4], variety: scores[5], organization: scores[6]
      };

      firebase.firestore()
        .collection("users")
        .doc(currentUser.uid) // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
        .collection("nutritionWheel")
        .add({
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          scores: scoreObject
        })
        .then(() => {
          console.log("üéâ –£—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ë–î!");
          alert("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å!");
        })
        .catch((error) => {
          console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", error);
          alert("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: " + error.message);
        });
    }

    // ... (–û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏: drawWheel, shadeColor –∏ —Ç.–¥. –æ—Å—Ç–∞–≤—å –∫–∞–∫ –±—ã–ª–∏) ...
    // –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Ñ—É–Ω–∫—Ü–∏–∏ drawWheel, shadeColor, displayResults, setupWheelHover, displayDetailedScores, resetForm, drawMultilineText
    // (–Ø –∏—Ö –Ω–µ –¥—É–±–ª–∏—Ä—É—é, —á—Ç–æ–±—ã –Ω–µ –∑–∞–Ω–∏–º–∞—Ç—å –º–µ—Å—Ç–æ, –æ–Ω–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º –æ—Ç–≤–µ—Ç–µ)
    
    // --- –í—Å—Ç–∞–≤—å –∫–æ–¥ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ Canvas –Ω–∏–∂–µ ---
    function drawMultilineText(ctx, text, x, y, maxWidth, lineHeight) {
      const words = text.split(' ');
      let line = '';
      const lines = [];
      for (let n = 0; n < words.length; n++) {
        const testLine = line + words[n] + ' ';
        const metrics = ctx.measureText(testLine);
        if (metrics.width > maxWidth && n > 0) {
          lines.push(line.trim());
          line = words[n] + ' ';
        } else {
          line = testLine;
        }
      }
      lines.push(line.trim());
      lines.forEach((l, i) => {
        ctx.fillText(l, x, y + i * lineHeight);
      });
      return lines.length;
    }

    function shadeColor(color, percent) {
      const f = parseInt(color.slice(1), 16);
      const t = percent < 0 ? 0 : 255;
      const p = Math.abs(percent) / 100;
      const R = f >> 16;
      const G = (f >> 8) & 0x00FF;
      const B = f & 0x0000FF;
      return "#" + (
        0x1000000 +
        (Math.round((t - R) * p) + R) * 0x10000 +
        (Math.round((t - G) * p) + G) * 0x100 +
        (Math.round((t - B) * p) + B)
      ).toString(16).slice(1);
    }

    function displayResults(scores) {
      const resultsDiv = document.getElementById('results');
      const canvas = document.getElementById('wheelCanvas');
      const ctx = canvas.getContext('2d');
      resultsDiv.classList.add('show');
      resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
      lastScores = scores.slice();
      drawWheel(ctx, canvas, scores);
      setupWheelHover(canvas, ctx);
      displayDetailedScores(scores);
    }

    function setupWheelHover(canvas, ctx) {
      if (hoverBound) return;
      hoverBound = true;
      canvas.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const maxRadius = Math.min(centerX, centerY) - WHEEL_PADDING;
        const x = e.clientX - rect.left - centerX;
        const y = e.clientY - rect.top - centerY;
        const distance = Math.sqrt(x * x + y * y);
        if (distance > maxRadius) {
          if (hoveredSector !== null) {
            hoveredSector = null;
            drawWheel(ctx, canvas, lastScores);
          }
          return;
        }
        let angle = Math.atan2(y, x) + Math.PI / 2;
        if (angle < 0) angle += Math.PI * 2;
        const numCategories = categories.length;
        const sector = Math.floor(angle / (Math.PI * 2 / numCategories));
        if (hoveredSector !== sector) {
          hoveredSector = sector;
          drawWheel(ctx, canvas, lastScores);
        }
      });
      canvas.addEventListener('mouseleave', () => {
        if (hoveredSector !== null) {
          hoveredSector = null;
          drawWheel(ctx, canvas, lastScores);
        }
      });
    }

    function drawWheel(ctx, canvas, scores) {
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const maxRadius = Math.min(centerX, centerY) - WHEEL_PADDING;
      const numCategories = categories.length;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.strokeStyle = '#e0e0e0';
      ctx.lineWidth = 1;
      for (let i = 1; i <= 10; i++) {
        ctx.beginPath();
        ctx.arc(centerX, centerY, (maxRadius / 10) * i, 0, 2 * Math.PI);
        ctx.stroke();
      }
      ctx.strokeStyle = '#d0d0d0';
      for (let i = 0; i < numCategories; i++) {
        const angle = (Math.PI * 2 * i) / numCategories - Math.PI / 2;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(centerX + maxRadius * Math.cos(angle), centerY + maxRadius * Math.sin(angle));
        ctx.stroke();
      }
      for (let i = 0; i < numCategories; i++) {
        const score = scores[i];
        const radius = (maxRadius / 10) * score;
        const startAngle = (Math.PI * 2 * i) / numCategories - Math.PI / 2;
        const endAngle = (Math.PI * 2 * (i + 1)) / numCategories - Math.PI / 2;
        ctx.fillStyle = (hoveredSector === i) ? shadeColor(categories[i].color, -15) : categories[i].color;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, startAngle, endAngle);
        ctx.closePath();
        ctx.fill();
      }
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      for (let i = 0; i < numCategories; i++) {
        const startAngle = (Math.PI * 2 * i) / numCategories - Math.PI / 2;
        const endAngle = (Math.PI * 2 * (i + 1)) / numCategories - Math.PI / 2;
        const midAngle = (startAngle + endAngle) / 2;
        const labelRadius = maxRadius + LABEL_RADIUS_ADD;
        const x = centerX + labelRadius * Math.cos(midAngle);
        const y = centerY + labelRadius * Math.sin(midAngle);
        const title = `${categories[i].emoji} ${categories[i].name}`;
        const value = `${scores[i]}/10`;
        const maxTextWidth = 120;
        const lineHeight = 16;
        ctx.font = 'bold 14px Arial';
        const estimatedLines = Math.max(1, Math.ceil(ctx.measureText(title).width / maxTextWidth));
        const totalHeight = estimatedLines * lineHeight + 18;
        ctx.fillStyle = 'rgba(255,255,255,0.92)';
        ctx.fillRect(x - maxTextWidth/2 - 8, y - totalHeight/2 - 8, maxTextWidth + 16, totalHeight + 16);
        ctx.fillStyle = '#2c3e50';
        drawMultilineText(ctx, title, x, y - 8, maxTextWidth, lineHeight);
        ctx.font = 'bold 13px Arial';
        ctx.fillStyle = categories[i].color;
        ctx.fillText(value, x, y + totalHeight/2 - 12);
      }
    }

    function displayDetailedScores(scores) {
      const scoresList = document.getElementById('scoresList');
      scoresList.innerHTML = '';
      categories.forEach((cat, index) => {
        const scoreItem = document.createElement('div');
        scoreItem.className = 'score-item';
        scoreItem.innerHTML = `<h3>${cat.emoji} ${cat.name}</h3><div class="score" style="color: ${cat.color}">${scores[index]}/10</div>`;
        scoresList.appendChild(scoreItem);
      });
    }

    function resetForm() {
      document.getElementById('balanceForm').reset();
      document.getElementById('results').classList.remove('show');
      window.scrollTo({ top: 0, behavior: 'smooth' });
      hoveredSector = null;
      lastScores = [];
    }

    window.addEventListener('load', () => {
      const container = document.querySelector('.container');
      if(container) {
        container.style.transition = 'all 0.6s ease';
        container.style.opacity = '1';
        container.style.transform = 'translateY(0)';
      }
    });
</script>
</body>
</html>
