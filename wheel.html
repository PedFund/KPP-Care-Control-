<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–æ–ª–µ—Å–æ –±–∞–ª–∞–Ω—Å–∞ –ø–∏—Ç–∞–Ω–∏—è: –ö–ü–ü</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #333;
    }

    .topbar {
      max-width: 900px;
      margin: 0 auto 12px auto;
      display: flex;
      justify-content: flex-start;
    }

    .back-btn {
      padding: 10px 14px;
      border: none;
      background: rgba(255,255,255,0.85);
      color: #2c3e50;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.2em;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.1em;
      opacity: 0.9;
    }

    .content { padding: 30px; }

    .category {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 25px;
      border-left: 5px solid;
      transition: transform 0.2s;
    }

    .category:hover { transform: translateX(5px); }

    /* –ø–æ—Ä—è–¥–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤–∞–∂–µ–Ω: 7 –±–ª–æ–∫–æ–≤ */
    .category:nth-of-type(1) { border-left-color: #3498db; }
    .category:nth-of-type(2) { border-left-color: #e74c3c; }
    .category:nth-of-type(3) { border-left-color: #f39c12; }
    .category:nth-of-type(4) { border-left-color: #2ecc71; }
    .category:nth-of-type(5) { border-left-color: #9b59b6; }
    .category:nth-of-type(6) { border-left-color: #1abc9c; }
    .category:nth-of-type(7) { border-left-color: #e67e22; }

    .category-title {
      font-size: 1.5em;
      font-weight: bold;
      margin-bottom: 20px;
      color: #2c3e50;
    }

    .question {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      padding: 12px;
      background: white;
      border-radius: 8px;
      transition: background 0.2s;
    }

    .question:hover { background: #e8f4f8; }

    .question label {
      flex: 1;
      cursor: pointer;
      font-size: 1em;
      line-height: 1.5;
      user-select: none;
    }

    .question input[type="checkbox"] {
      width: 24px;
      height: 24px;
      margin-right: 15px;
      cursor: pointer;
      accent-color: #667eea;
    }

    .button-container {
      text-align: center;
      margin: 40px 0;
    }

    .calculate-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 18px 60px;
      font-size: 1.2em;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      transition: all 0.3s;
      font-weight: bold;
    }

    .calculate-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
    }

    .calculate-btn:active { transform: translateY(0); }

    .reset-btn {
      background: #95a5a6;
      color: white;
      border: none;
      padding: 12px 30px;
      font-size: 1em;
      border-radius: 50px;
      cursor: pointer;
      margin-left: 15px;
      transition: all 0.3s;
    }

    .reset-btn:hover {
      background: #7f8c8d;
      transform: translateY(-2px);
    }

    .results {
      display: none;
      padding: 40px;
      background: #f8f9fa;
      border-radius: 15px;
      margin-top: 30px;
    }

    .results.show {
      display: block;
      animation: fadeIn 0.5s;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .results h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
      font-size: 2em;
    }

    .canvas-container {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
    }

    #wheelCanvas { max-width: 100%; height: auto; }

    .scores {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 30px;
    }

    .score-item {
      background: white;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .score-item h3 { font-size: 1em; margin-bottom: 10px; color: #555; }

    .score-item .score { font-size: 2em; font-weight: bold; color: #667eea; }

    @media (max-width: 768px) {
      .header h1 { font-size: 1.7em; }
      .category { padding: 20px; }
      .category-title { font-size: 1.3em; }
      .calculate-btn { padding: 15px 40px; font-size: 1.05em; }
      .scores { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>

  <div class="topbar">
    <button class="back-btn" onclick="window.location.href='/'">‚Üê –ù–∞–∑–∞–¥ –∫ –∏–∑–º–µ—Ä–µ–Ω–∏—è–º</button>
  </div>

  <div class="container">
    <div class="header">
      <h1>üéØ –ö–æ–ª–µ—Å–æ –±–∞–ª–∞–Ω—Å–∞ –ø–∏—Ç–∞–Ω–∏—è: –ö–ü–ü</h1>
      <p>–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ —É–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π –±–∞–ª–∞–Ω—Å –ø–∏—Ç–∞–Ω–∏—è</p>
    </div>

    <div class="content">
      <form id="balanceForm">
        <!-- –í–æ–¥–∞ -->
        <div class="category">
          <div class="category-title">üíß –í–æ–¥–∞</div>
          <div class="question"><input type="checkbox" id="water1" name="water"><label for="water1">–Ø –æ—Ç–ª–∏—á–∞—é –∂–∞–∂–¥—É –æ—Ç –≥–æ–ª–æ–¥–∞.</label></div>
          <div class="question"><input type="checkbox" id="water2" name="water"><label for="water2">–Ø –Ω–∞—á–∏–Ω–∞—é —É—Ç—Ä–æ —Å —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –≤–æ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="water3" name="water"><label for="water3">–Ø –ø—Ä–∞–∫—Ç–∏–∫—É—é –Ω–∞–≤—ã–∫ ¬´—Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≥–ª–æ—Ç–∫–∞¬ª –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ–ª–æ–¥–∞ –∏–ª–∏ –∂–∞–∂–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="water4" name="water"><label for="water4">–Ø –ø–æ—Å–µ—â–∞—é —Ç—É–∞–ª–µ—Ç –Ω–µ –º–µ–Ω–µ–µ 4 —Ä–∞–∑ –∑–∞ –¥–µ–Ω—å.</label></div>
          <div class="question"><input type="checkbox" id="water5" name="water"><label for="water5">–ú–æ—è –º–æ—á–∞ –Ω–µ–Ω–∞—Å—ã—â–µ–Ω–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ (—Å–≤–µ—Ç–ª–æ-–∂–µ–ª—Ç–∞—è, –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è).</label></div>
          <div class="question"><input type="checkbox" id="water6" name="water"><label for="water6">–£ –º–µ–Ω—è –Ω–µ—Ç —Å—É—Ö–æ—Å—Ç–∏ –∫–æ–∂–∏.</label></div>
          <div class="question"><input type="checkbox" id="water7" name="water"><label for="water7">–£ –º–µ–Ω—è –Ω–µ—Ç –æ—Ç–µ—á–Ω–æ—Å—Ç–∏ –≥–ª–∞–∑ —É—Ç—Ä–æ–º (—Ç—Ä—É–¥–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–∑–∞) –∏–ª–∏ –æ—Ç–µ–∫–æ–≤ –Ω–∞ –Ω–æ–≥–∞—Ö.</label></div>
          <div class="question"><input type="checkbox" id="water8" name="water"><label for="water8">–£ –º–µ–Ω—è –Ω–µ—Ç –∂–µ–ª–∞–Ω–∏—è –ø–∏—Ç—å –ø–æ—Å–ª–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –µ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="water9" name="water"><label for="water9">–£ –º–µ–Ω—è –Ω–µ—Ç —Å—É—Ö–æ–≥–æ —Å—Ç—É–ª–∞ –∏–ª–∏ –∑–∞–ø–æ—Ä–æ–≤.</label></div>
          <div class="question"><input type="checkbox" id="water10" name="water"><label for="water10">–£ –º–µ–Ω—è –Ω–µ—Ç —Å—É—Ö–æ—Å—Ç–∏ —Å–ª–∏–∑–∏—Å—Ç—ã—Ö, –∑–∞–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–æ—Å–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ —É—Ç—Ä–∞–º).</label></div>
        </div>

        <!-- –ë–µ–ª–æ–∫ -->
        <div class="category">
          <div class="category-title">ü•© –ë–µ–ª–æ–∫</div>
          <div class="question"><input type="checkbox" id="protein1" name="protein"><label for="protein1">–Ø —É–ø–æ—Ç—Ä–µ–±–ª—è—é –∂–∏–≤–æ—Ç–Ω—ã–π –±–µ–ª–æ–∫.</label></div>
          <div class="question"><input type="checkbox" id="protein2" name="protein"><label for="protein2">–Ø —É–ø–æ—Ç—Ä–µ–±–ª—è—é —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π –±–µ–ª–æ–∫.</label></div>
          <div class="question"><input type="checkbox" id="protein3" name="protein"><label for="protein3">–í –∫–∞–∂–¥–æ–º –º–æ–µ–º –ø—Ä–∏–µ–º–µ –ø–∏—â–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –±–µ–ª–∫–∞ (–∂–∏–≤–æ—Ç–Ω—ã–π –∏–ª–∏ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π).</label></div>
          <div class="question"><input type="checkbox" id="protein4" name="protein"><label for="protein4">–£ –º–µ–Ω—è –Ω–µ—Ç –≥–∞–∑–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ –µ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="protein5" name="protein"><label for="protein5">–Ø –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∫—Ä–∞—Å–Ω–æ–≥–æ –º—è—Å–∞ 1-2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é.</label></div>
          <div class="question"><input type="checkbox" id="protein6" name="protein"><label for="protein6">–Ø –º–∞—Ä–∏–Ω—É—é –º—è—Å–æ –ø–µ—Ä–µ–¥ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ–º –µ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="protein7" name="protein"><label for="protein7">–Ø –∏—Å–ø–æ–ª—å–∑—É—é —â–∞–¥—è—â–∏–µ —Å–ø–æ—Å–æ–±—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –º—è—Å–∞ (—Ç—É—à–µ–Ω–∏–µ, –∑–∞–ø–µ–∫–∞–Ω–∏–µ –ø—Ä–∏ –Ω–∏–∑–∫–∏—Ö —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞—Ö –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="protein8" name="protein"><label for="protein8">–£ –º–µ–Ω—è –Ω–µ—Ç —Å–æ–Ω–ª–∏–≤–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –±–µ–ª–∫–æ–≤–æ–π –ø–∏—â–∏.</label></div>
          <div class="question"><input type="checkbox" id="protein9" name="protein"><label for="protein9">–£ –º–µ–Ω—è –Ω–µ—Ç –º—ã—à–µ—á–Ω–æ–π —Å–ª–∞–±–æ—Å—Ç–∏.</label></div>
          <div class="question"><input type="checkbox" id="protein10" name="protein"><label for="protein10">–£ –º–µ–Ω—è –Ω–µ—Ç —Ç—è–∂–µ—Å—Ç–∏ –≤ –∂–∏–≤–æ—Ç–µ –ø–æ—Å–ª–µ –µ–¥—ã –∏ —Å–∏–º–ø—Ç–æ–º–æ–≤ –¥–µ—Ñ–∏—Ü–∏—Ç–∞ –±–µ–ª–∫–∞.</label></div>
        </div>

        <!-- –ñ–∏—Ä—ã -->
        <div class="category">
          <div class="category-title">ü•ë –ñ–∏—Ä—ã</div>
          <div class="question"><input type="checkbox" id="fats1" name="fats"><label for="fats1">–Ø –µ–º –∂–∏–≤–æ—Ç–Ω—ã–µ –∂–∏—Ä—ã (–∂–∏—Ä–Ω–æ–µ –º—è—Å–æ, —Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ, —è–π—Ü–∞, —Å–∞–ª–æ –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="fats2" name="fats"><label for="fats2">–í –º–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø—Ä–æ–≥–æ—Ä–∫–ª—ã–µ –º–∞—Å–ª–∞ –∏ –ø—Ä–æ–¥—É–∫—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Ç—Ä–∞–Ω—Å–∂–∏—Ä—ã (–º–∞—Ä–≥–∞—Ä–∏–Ω, –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∞—è –≤—ã–ø–µ—á–∫–∞, —Å—É—Ö–∞—Ä–∏, –ø–µ—á–µ–Ω—å–µ, –≤–∞—Ñ–ª–∏, –º–∞–π–æ–Ω–µ–∑, –ø–æ–ø–∫–æ—Ä–Ω, –∫—Ä–µ–∫–µ—Ä—ã, —á–∏–ø—Å—ã, –ø–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="fats3" name="fats"><label for="fats3">–Ø –µ–º –∂–∏—Ä–Ω—É—é –º–æ—Ä—Å–∫—É—é —Ä—ã–±—É 2-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é.</label></div>
          <div class="question"><input type="checkbox" id="fats4" name="fats"><label for="fats4">–ò–Ω–æ–≥–¥–∞ —è –≥–æ—Ç–æ–≤–ª—é –ø–∏—â—É –Ω–∞ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã—Ö –∂–∏—Ä–∞—Ö (—Ç–æ–ø–ª–µ–Ω–æ–µ —Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ (–≥—Ö–∏), –∫–æ–∫–æ—Å–æ–≤–æ–µ –º–∞—Å–ª–æ, –∂–∏–≤–æ—Ç–Ω—ã–π –∂–∏—Ä –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="fats5" name="fats"><label for="fats5">–Ø –¥–æ–±–∞–≤–ª—è—é –≤ –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –ø–∏—â—É –Ω–µ—Ä–∞—Ñ–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Å–ª–∞ (–æ–ª–∏–≤–∫–æ–≤–æ–µ, –ª—å–Ω—è–Ω–æ–µ, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ, –æ—Ä–µ—Ö–æ–≤–æ–µ –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="fats6" name="fats"><label for="fats6">–£ –º–µ–Ω—è –Ω–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —á—É–≤—Å—Ç–≤–∞ –≥–æ–ª–æ–¥–∞.</label></div>
          <div class="question"><input type="checkbox" id="fats7" name="fats"><label for="fats7">–ü–æ—Å–ª–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∂–∏—Ä–Ω–æ–π –ø–∏—â–∏ —É –º–µ–Ω—è –Ω–µ—Ç —Ç—è–∂–µ—Å—Ç–∏ –∏ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–∞ –≤ –∂–∏–≤–æ—Ç–µ.</label></div>
          <div class="question"><input type="checkbox" id="fats8" name="fats"><label for="fats8">–£ –º–µ–Ω—è –Ω–µ—Ç –±–µ—Å–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —ç–º–æ—Ü–∏–π –∏/–∏–ª–∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏.</label></div>
          <div class="question"><input type="checkbox" id="fats9" name="fats"><label for="fats9">–°—Ç—É–ª —Å–º—ã–≤–∞–µ—Ç—Å—è –∏ –Ω–µ –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥–æ–≤ –Ω–∞ —Å—Ç–µ–Ω–∫–∞—Ö —É–Ω–∏—Ç–∞–∑–∞.</label></div>
          <div class="question"><input type="checkbox" id="fats10" name="fats"><label for="fats10">–£ –º–µ–Ω—è –Ω–µ—Ç –≤—ã–ø–∞–¥–µ–Ω–∏—è –≤–æ–ª–æ—Å –∏ –ª–æ–º–∫–æ—Å—Ç–∏ –Ω–æ–≥—Ç–µ–π, –∏/–∏–ª–∏ –±–æ–ª–µ–π –≤ —Å—É—Å—Ç–∞–≤–∞—Ö.</label></div>
        </div>

        <!-- –£–≥–ª–µ–≤–æ–¥—ã -->
        <div class="category">
          <div class="category-title">üçû –£–≥–ª–µ–≤–æ–¥—ã</div>
          <div class="question"><input type="checkbox" id="carbs1" name="carbs"><label for="carbs1">–Ø –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é –≤ —Ä–∞—Ü–∏–æ–Ω–µ –ø—Ä–æ–¥—É–∫—Ç—ã, –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –∏–∑ —Ä–∞—Ñ–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –º—É–∫–∏ (–æ–ª–∏–≤–∫–æ–≤–æ–µ, –ª—å–Ω—è–Ω–æ–µ, –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ, –æ—Ä–µ—Ö–æ–≤–æ–µ –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="carbs2" name="carbs"><label for="carbs2">–í –º–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∂–∏–¥–∫–∏–µ —É–≥–ª–µ–≤–æ–¥—ã (—Å–æ–∫–∏, –≥–∞–∑–∏—Ä–æ–≤–∫–∏, —Ñ—Ä—É–∫—Ç–æ–≤—ã–µ —Å–º—É–∑–∏ –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="carbs3" name="carbs"><label for="carbs3">–£ –º–µ–Ω—è –Ω–µ—Ç —Ç—è–≥–∏ –∫ —Å–ª–∞–¥–∫–æ–º—É.</label></div>
          <div class="question"><input type="checkbox" id="carbs4" name="carbs"><label for="carbs4">–Ø –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–µ–ª—å–Ω—ã—Ö –∑–ª–∞–∫–æ–≤ (—Ü/–∑ –∫—Ä—É–ø—ã, —Ü/–∑ –º—É–∫–∞, —Ü/–∑ —Ö–ª–µ–± –∏ —Ç.–¥.) –≤ —Å–≤–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ.</label></div>
          <div class="question"><input type="checkbox" id="carbs5" name="carbs"><label for="carbs5">–í –º–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø—Ä–æ–¥—É–∫—Ç—ã —Å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–∞—Ö–∞—Ä–∞–º–∏ (—Å—Ç–µ–≤–∏—è, —Ñ—Ä—É–∫—Ç–æ–∑–∞, —Ñ—Ä—É–∫—Ç–æ–∑–Ω—ã–π, –∫–ª–µ–Ω–æ–≤—ã–π —Å–∏—Ä–æ–ø, –º–µ–¥ –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="carbs6" name="carbs"><label for="carbs6">–Ø –Ω–µ –ø—Ä–æ–±—É–∂–¥–∞—é—Å—å –Ω–æ—á—å—é –æ—Ç –≥–æ–ª–æ–¥–∞.</label></div>
          <div class="question"><input type="checkbox" id="carbs7" name="carbs"><label for="carbs7">–ü—Ä–æ–¥—É–∫—Ç—ã —Å –≤—ã—Å–æ–∫–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º –∫—Ä–∞—Ö–º–∞–ª–∞ (–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å, –∫—É–∫—É—Ä—É–∑–∞, —Ç—ã–∫–≤–∞, –≥–æ—Ä–æ—Ö, –±–µ–ª—ã–π —Ä–∏—Å –∏ —Ç.–¥.) –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –º–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ –Ω–µ —á–∞—â–µ 3 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é.</label></div>
          <div class="question"><input type="checkbox" id="carbs8" name="carbs"><label for="carbs8">–í –º–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Å–æ—É—Å—ã —Ñ–∞–±—Ä–∏—á–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ (–∫–µ—Ç—á—É–ø—ã, –±—É—Ä–≥–µ—Ä–Ω—ã–µ —Å–æ—É—Å, —Å–∞–ª–∞—Ç–Ω—ã–µ –∑–∞–ø—Ä–∞–≤–∫–∏ –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="carbs9" name="carbs"><label for="carbs9">–í –º–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Å–ª–∞–¥–æ—Å—Ç–∏ –∏ –≤—ã–ø–µ—á–∫–∞.</label></div>
          <div class="question"><input type="checkbox" id="carbs10" name="carbs"><label for="carbs10">–£ –º–µ–Ω—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏.</label></div>
        </div>

        <!-- –ö–ª–µ—Ç—á–∞—Ç–∫–∞ -->
        <div class="category">
          <div class="category-title">ü•ó –ö–ª–µ—Ç—á–∞—Ç–∫–∞</div>
          <div class="question"><input type="checkbox" id="fiber1" name="fiber"><label for="fiber1">–Ø –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –µ–º –∫–ª–µ—Ç—á–∞—Ç–∫—É –≤ –≤–∏–¥–µ –∑–µ–ª–µ–Ω–∏, —Ü–µ–ª—å–Ω—ã—Ö –∫—Ä—É–ø, –æ–≤–æ—â–µ–π.</label></div>
          <div class="question"><input type="checkbox" id="fiber2" name="fiber"><label for="fiber2">–£ –º–µ–Ω—è –Ω–µ –Ω–∞—Å—Ç—É–ø–∞–µ—Ç –±—ã—Å—Ç—Ä–æ–µ —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞ –ø–æ—Å–ª–µ –µ–¥—ã.</label></div>
          <div class="question"><input type="checkbox" id="fiber3" name="fiber"><label for="fiber3">–Ø –µ–º –æ–≤–æ—â–∏ —Å —Ä–∞–∑–Ω—ã–º –≤–∏–¥–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å (—Å—ã—Ä—ã–µ, —Ç—É—à–µ–Ω—ã–µ, –≤–∞—Ä–µ–Ω—ã–µ, –∑–∞–ø–µ—á–µ–Ω–Ω—ã–µ).</label></div>
          <div class="question"><input type="checkbox" id="fiber4" name="fiber"><label for="fiber4">–í –º–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø—Ä–æ–¥—É–∫—Ç—ã, —Å—Ç–∏–º—É–ª–∏—Ä—É—é—â–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–ª–∏–∑–∏ (–ø–µ–∫—Ç–∏–Ω, –ª–µ–Ω, –æ–≤—Å—è–Ω–∫–∞, —Ä–∏—Å, –ø—Å–∏–ª–ª–∏—É–º).</label></div>
          <div class="question"><input type="checkbox" id="fiber5" name="fiber"><label for="fiber5">–í –º–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ –µ—Å—Ç—å —Ä–µ–∑–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –∫—Ä–∞—Ö–º–∞–ª (–∑–µ–ª–µ–Ω—ã–µ –±–∞–Ω–∞–Ω—ã, –æ—Ç–≤–∞—Ä–Ω–æ–π –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å –≤ —Ö–æ–ª–æ–¥–Ω–æ–º –≤–∏–¥–µ, —Ä–∏—Å –≤ —Ö–æ–ª–æ–¥–Ω–æ–º –≤–∏–¥–µ).</label></div>
          <div class="question"><input type="checkbox" id="fiber6" name="fiber"><label for="fiber6">–ü–æ—Å–ª–µ –µ–¥—ã —É –º–µ–Ω—è –Ω–µ—Ç –≤–∑–¥—É—Ç–∏—è –∂–∏–≤–æ—Ç–∞ –∏ —É—Ä—á–∞–Ω–∏—è –≤ –∫–∏—à–µ—á–Ω–∏–∫–µ.</label></div>
          <div class="question"><input type="checkbox" id="fiber7" name="fiber"><label for="fiber7">–£ –º–µ–Ω—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π —Å—Ç—É–ª.</label></div>
          <div class="question"><input type="checkbox" id="fiber8" name="fiber"><label for="fiber8">–£ –º–µ–Ω—è –Ω–µ—Ç –ª–∏—à–Ω–µ–≥–æ –≤–µ—Å–∞.</label></div>
          <div class="question"><input type="checkbox" id="fiber9" name="fiber"><label for="fiber9">–£ –º–µ–Ω—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã –≤ –∫—Ä–æ–≤–∏.</label></div>
          <div class="question"><input type="checkbox" id="fiber10" name="fiber"><label for="fiber10">–£ –º–µ–Ω—è –∑–¥–æ—Ä–æ–≤—ã–π —Ü–≤–µ—Ç –ª–∏—Ü–∞, –Ω–µ—Ç —Å—É—Ö–æ—Å—Ç–∏ –∏ —à–µ–ª—É—à–µ–Ω–∏—è –∫–æ–∂–∏.</label></div>
        </div>

        <!-- –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ -->
        <div class="category">
          <div class="category-title">üåà –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–∏—Ç–∞–Ω–∏—è</div>
          <div class="question"><input type="checkbox" id="variety1" name="variety"><label for="variety1">–Ø –∏—Å–ø–æ–ª—å–∑—É—é –æ–≤–æ—â–∏/–∑–µ–ª–µ–Ω—å –≤ —Å–≤–µ–∂–µ–º –≤–∏–¥–µ.</label></div>
          <div class="question"><input type="checkbox" id="variety2" name="variety"><label for="variety2">–Ø —Ä–µ–≥—É–ª—è—Ä–Ω–æ —É–ø–æ—Ç—Ä–µ–±–ª—è—é —Ñ—Ä—É–∫—Ç—ã/—è–≥–æ–¥—ã –≤ —Å–≤–µ–∂–µ–º –∏–ª–∏ –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω–æ–º –≤–∏–¥–µ.</label></div>
          <div class="question"><input type="checkbox" id="variety3" name="variety"><label for="variety3">–Ø —Ä–µ–≥—É–ª—è—Ä–Ω–æ —É–ø–æ—Ç—Ä–µ–±–ª—è—é —Å–ø–µ—Ü–∏–∏ (–∫—É—Ä–∫—É–º–∞, –∏–º–±–∏—Ä—å, –∫–æ—Ä–∏—Ü–∞, —á–µ—Å–Ω–æ–∫, –∫–∞—Ä–¥–∞–º–æ–Ω, –∫—É–º–∏–Ω, —Ç–∏–º—å—è–Ω, –≥–≤–æ–∑–¥–∏–∫–∞, —Ñ–µ–Ω—Ö–µ–ª—å, —à–∞—Ñ—Ä–∞–Ω, –ø–∞–ø—Ä–∏–∫–∞, –∫—Ä–∞—Å–Ω—ã–π –∏ —á–µ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="variety4" name="variety"><label for="variety4">–Ø –º–µ–Ω—è—é –≤–∏–¥—ã –∫—Ä—É–ø –≤ —Å–≤–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ.</label></div>
          <div class="question"><input type="checkbox" id="variety5" name="variety"><label for="variety5">–Ø —Ä–µ–≥—É–ª—è—Ä–Ω–æ —É–ø–æ—Ç—Ä–µ–±–ª—è—é –±–æ–±–æ–≤—ã–µ (—Ñ–∞—Å–æ–ª—å, –≥–æ—Ä–æ—Ö, —á–µ—á–µ–≤–∏—Ü–∞, –Ω—É—Ç –∏ —Ç.–¥.).</label></div>
          <div class="question"><input type="checkbox" id="variety6" name="variety"><label for="variety6">–Ø —Ä–µ–≥—É–ª—è—Ä–Ω–æ —É–ø–æ—Ç—Ä–µ–±–ª—è—é –º–æ–ª–æ—á–Ω—ã–µ/–∫–∏—Å–ª–æ–º–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–ª–∏ –∏—Ö —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏.</label></div>
          <div class="question"><input type="checkbox" id="variety7" name="variety"><label for="variety7">–Ø —Ä–µ–≥—É–ª—è—Ä–Ω–æ —É–ø–æ—Ç—Ä–µ–±–ª—è—é —Ä—ã–±—É/–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã.</label></div>
          <div class="question"><input type="checkbox" id="variety8" name="variety"><label for="variety8">–Ø –∏—Å–ø–æ–ª—å–∑—É—é —Ä–∞–∑–Ω—ã–µ –≤–∏–¥—ã –æ—Ä–µ—Ö–æ–≤/—Å–µ–º—è–Ω –≤ —Ä–∞—Ü–∏–æ–Ω–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏.</label></div>
          <div class="question"><input type="checkbox" id="variety9" name="variety"><label for="variety9">–Ø –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —É–ø–æ—Ç—Ä–µ–±–ª—è—é —Ñ–µ—Ä–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã (–∫–≤–∞—à–µ–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞, –º–æ—á–µ–Ω—ã–µ –æ–≥—É—Ä—Ü—ã, —è–±–ª–æ–∫–∏ –∏ –ø—Ä.).</label></div>
          <div class="question"><input type="checkbox" id="variety10" name="variety"><label for="variety10">–Ø –ø—Ä–æ–±—É—é –Ω–æ–≤—ã–µ –±–ª—é–¥–∞ –∏ –ø—Ä–æ–¥—É–∫—Ç—ã, –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–∞–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å.</label></div>
        </div>

        <!-- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è -->
        <div class="category">
          <div class="category-title">‚è∞ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏</div>
          <div class="question"><input type="checkbox" id="organization1" name="organization"><label for="organization1">–£ –º–µ–Ω—è –Ω–µ –±–æ–ª—å—à–µ 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏ –∏ 2 –ø–µ—Ä–µ–∫—É—Å–æ–≤.</label></div>
          <div class="question"><input type="checkbox" id="organization2" name="organization"><label for="organization2">–£ –º–µ–Ω—è –Ω–µ—Ç –ø–æ—Å—Ç–Ω—ã—Ö/—Ä–∞–∑–≥—Ä—É–∑–æ—á–Ω—ã—Ö/¬´–≥–æ–ª–æ–¥–Ω—ã—Ö¬ª –¥–Ω–µ–π.</label></div>
          <div class="question"><input type="checkbox" id="organization3" name="organization"><label for="organization3">–£ –º–µ–Ω—è –µ—Å—Ç—å ¬´–ø—Ä–∞–∑–¥–Ω–∏–∫ –∂–∏–≤–æ—Ç–∞¬ª —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é/–≤ –ø–∞—Ä—É –Ω–µ–¥–µ–ª—å.</label></div>
          <div class="question"><input type="checkbox" id="organization4" name="organization"><label for="organization4">–î–Ω–µ–≤–Ω–æ–π –ø–µ—Ä–µ—Ä—ã–≤ –º–µ–∂–¥—É –ø—Ä–∏–µ–º–∞–º–∏ –ø–∏—â–∏ –±–µ–∑ –ø–µ—Ä–µ–∫—É—Å–æ–≤ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ –º–µ–Ω–µ–µ 3 —á–∞—Å–æ–≤, –∞ –Ω–æ—á–Ω–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É —É–∂–∏–Ω–æ–º –∏ –∑–∞–≤—Ç—Ä–∞–∫–æ–º ‚Äî –Ω–µ –º–µ–Ω–µ–µ 9 —á–∞—Å–æ–≤.</label></div>
          <div class="question"><input type="checkbox" id="organization5" name="organization"><label for="organization5">–Ø –µ–º –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞, –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∏ –ø—Ä., —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–≤—à–∏—Å—å –Ω–∞ –µ–¥–µ.</label></div>
          <div class="question"><input type="checkbox" id="organization6" name="organization"><label for="organization6">–Ø –ø–ª–∞–Ω–∏—Ä—É—é —Å–≤–æ—ë –ø–∏—Ç–∞–Ω–∏–µ –∑–∞—Ä–∞–Ω–µ–µ.</label></div>
          <div class="question"><input type="checkbox" id="organization7" name="organization"><label for="organization7">–Ø —Å–æ—Å—Ç–∞–≤–ª—è—é —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π.</label></div>
          <div class="question"><input type="checkbox" id="organization8" name="organization"><label for="organization8">–£ –º–µ–Ω—è –Ω–µ—Ç –ø—Ä–∏—ë–º–æ–≤ –ø–∏—â–∏ –Ω–∞ –±–µ–≥—É.</label></div>
          <div class="question"><input type="checkbox" id="organization9" name="organization"><label for="organization9">–Ø –ø–æ–ª—å–∑—É—é—Å—å –ø—Ä–∞–≤–∏–ª–æ–º —Ç–∞—Ä–µ–ª–∫–∏ –ø—Ä–∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–∏–µ–º–∞ –ø–∏—â–∏.</label></div>
          <div class="question"><input type="checkbox" id="organization10" name="organization"><label for="organization10">–Ø –ø–æ–ª—å–∑—É—é—Å—å –ø—Ä–∞–≤–∏–ª–æ–º –ª–∞–¥–æ–Ω–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–æ—Ä—Ü–∏–∏.</label></div>
        </div>

        <div class="button-container">
          <button type="button" class="calculate-btn" onclick="calculateBalance()">üéØ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –±–∞–ª–∞–Ω—Å</button>
          <button type="reset" class="reset-btn" onclick="resetForm()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
      </form>

      <div id="results" class="results">
        <h2>üìä –í–∞—à–µ –∫–æ–ª–µ—Å–æ –±–∞–ª–∞–Ω—Å–∞</h2>
        <div class="canvas-container">
          <canvas id="wheelCanvas" width="600" height="600"></canvas>
        </div>
        <div class="scores" id="scoresList"></div>
      </div>

    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è -->
  <script src="config.js"></script>
  <script src="firebase-init.js"></script>
  <script src="auth.js"></script>

  <script>
    // ===== wheel logic =====

    const categories = [
      { name: '–í–æ–¥–∞', color: '#3498db', emoji: 'üíß' },
      { name: '–ë–µ–ª–æ–∫', color: '#e74c3c', emoji: 'ü•©' },
      { name: '–ñ–∏—Ä—ã', color: '#f39c12', emoji: 'ü•ë' },
      { name: '–£–≥–ª–µ–≤–æ–¥—ã', color: '#2ecc71', emoji: 'üçû' },
      { name: '–ö–ª–µ—Ç—á–∞—Ç–∫–∞', color: '#9b59b6', emoji: 'ü•ó' },
      { name: '–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ', color: '#1abc9c', emoji: 'üåà' },
      { name: '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è', color: '#e67e22', emoji: '‚è∞' }
    ];

    let hoveredSector = null;
    let lastScores = [];
    let hoverBound = false;

    const WHEEL_PADDING = 90;
    const LABEL_RADIUS_ADD = 30;

    // –∂–¥—ë–º, –∫–æ–≥–¥–∞ Firebase –æ—Ç–¥–∞—Å—Ç user
    let AUTH_READY_USER = null;
    firebase.auth().onAuthStateChanged(function(user) {
      AUTH_READY_USER = user || null;
      if (user) console.log("–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:", user.uid);
      else console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω");
    });

    function calculateBalance() {
      const form = document.getElementById('balanceForm');
      const scores = [];

      const categoryNames = ['water', 'protein', 'fats', 'carbs', 'fiber', 'variety', 'organization'];
      categoryNames.forEach(cat => {
        const checkboxes = form.querySelectorAll(`input[name="${cat}"]:checked`);
        scores.push(checkboxes.length);
      });

      displayResults(scores);

      // === save to Firestore ===
      if (!AUTH_READY_USER) {
        console.log("–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º");
        return;
      }

      const scoreObject = {
        water: scores[0],
        protein: scores[1],
        fats: scores[2],
        carbs: scores[3],
        fiber: scores[4],
        variety: scores[5],
        organization: scores[6]
      };

      firebase.firestore()
        .collection("users")
        .doc(AUTH_READY_USER.uid)
        .collection("nutritionWheel")
        .add({
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          scores: scoreObject
        })
        .then(() => console.log("–ö–æ–ª–µ—Å–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"))
        .catch((e) => console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", e));
    }

    function drawMultilineText(ctx, text, x, y, maxWidth, lineHeight) {
      const words = text.split(' ');
      let line = '';
      const lines = [];

      for (let n = 0; n < words.length; n++) {
        const testLine = line + words[n] + ' ';
        const metrics = ctx.measureText(testLine);
        if (metrics.width > maxWidth && n > 0) {
          lines.push(line.trim());
          line = words[n] + ' ';
        } else {
          line = testLine;
        }
      }
      lines.push(line.trim());

      lines.forEach((l, i) => ctx.fillText(l, x, y + i * lineHeight));
      return lines.length;
    }

    function shadeColor(color, percent) {
      const f = parseInt(color.slice(1), 16);
      const t = percent < 0 ? 0 : 255;
      const p = Math.abs(percent) / 100;
      const R = f >> 16;
      const G = (f >> 8) & 0x00FF;
      const B = f & 0x0000FF;

      return "#" + (
        0x1000000 +
        (Math.round((t - R) * p) + R) * 0x10000 +
        (Math.round((t - G) * p) + G) * 0x100 +
        (Math.round((t - B) * p) + B)
      ).toString(16).slice(1);
    }

    function displayResults(scores) {
      const resultsDiv = document.getElementById('results');
      const canvas = document.getElementById('wheelCanvas');
      const ctx = canvas.getContext('2d');

      resultsDiv.classList.add('show');
      resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });

      lastScores = scores.slice();
      drawWheel(ctx, canvas, scores);
      setupWheelHover(canvas, ctx);
      displayDetailedScores(scores);
    }

    function setupWheelHover(canvas, ctx) {
      if (hoverBound) return;
      hoverBound = true;

      canvas.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const maxRadius = Math.min(centerX, centerY) - WHEEL_PADDING;

        const x = e.clientX - rect.left - centerX;
        const y = e.clientY - rect.top - centerY;

        const distance = Math.sqrt(x * x + y * y);

        if (distance > maxRadius) {
          if (hoveredSector !== null) {
            hoveredSector = null;
            drawWheel(ctx, canvas, lastScores);
          }
          return;
        }

        let angle = Math.atan2(y, x) + Math.PI / 2;
        if (angle < 0) angle += Math.PI * 2;

        const numCategories = categories.length;
        const sector = Math.floor(angle / (Math.PI * 2 / numCategories));

        if (hoveredSector !== sector) {
          hoveredSector = sector;
          drawWheel(ctx, canvas, lastScores);
        }
      });

      canvas.addEventListener('mouseleave', () => {
        if (hoveredSector !== null) {
          hoveredSector = null;
          drawWheel(ctx, canvas, lastScores);
        }
      });
    }

    function drawWheel(ctx, canvas, scores) {
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const maxRadius = Math.min(centerX, centerY) - WHEEL_PADDING;
      const numCategories = categories.length;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      ctx.strokeStyle = '#e0e0e0';
      ctx.lineWidth = 1;
      for (let i = 1; i <= 10; i++) {
        ctx.beginPath();
        ctx.arc(centerX, centerY, (maxRadius / 10) * i, 0, 2 * Math.PI);
        ctx.stroke();
      }

      ctx.strokeStyle = '#d0d0d0';
      ctx.lineWidth = 1;
      for (let i = 0; i < numCategories; i++) {
        const angle = (Math.PI * 2 * i) / numCategories - Math.PI / 2;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(centerX + maxRadius * Math.cos(angle), centerY + maxRadius * Math.sin(angle));
        ctx.stroke();
      }

      for (let i = 0; i < numCategories; i++) {
        const score = scores[i];
        const radius = (maxRadius / 10) * score;
        const startAngle = (Math.PI * 2 * i) / numCategories - Math.PI / 2;
        const endAngle = (Math.PI * 2 * (i + 1)) / numCategories - Math.PI / 2;

        ctx.fillStyle = (hoveredSector === i) ? shadeColor(categories[i].color, -15) : categories[i].color;

        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, startAngle, endAngle);
        ctx.closePath();
        ctx.fill();
      }

      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';

      for (let i = 0; i < numCategories; i++) {
        const startAngle = (Math.PI * 2 * i) / numCategories - Math.PI / 2;
        const endAngle = (Math.PI * 2 * (i + 1)) / numCategories - Math.PI / 2;
        const midAngle = (startAngle + endAngle) / 2;

        const labelRadius = maxRadius + LABEL_RADIUS_ADD;
        const x = centerX + labelRadius * Math.cos(midAngle);
        const y = centerY + labelRadius * Math.sin(midAngle);

        const title = `${categories[i].emoji} ${categories[i].name}`;
        const value = `${scores[i]}/10`;

        const maxTextWidth = 120;
        const lineHeight = 16;

        ctx.font = 'bold 14px Arial';
        const estimatedLines = Math.max(1, Math.ceil(ctx.measureText(title).width / maxTextWidth));
        const totalHeight = estimatedLines * lineHeight + 18;

        ctx.fillStyle = 'rgba(255,255,255,0.92)';
        ctx.fillRect(x - maxTextWidth / 2 - 8, y - totalHeight / 2 - 8, maxTextWidth + 16, totalHeight + 16);

        ctx.fillStyle = '#2c3e50';
        drawMultilineText(ctx, title, x, y - 8, maxTextWidth, lineHeight);

        ctx.font = 'bold 13px Arial';
        ctx.fillStyle = categories[i].color;
        ctx.fillText(value, x, y + totalHeight / 2 - 12);
      }
    }

    function displayDetailedScores(scores) {
      const scoresList = document.getElementById('scoresList');
      scoresList.innerHTML = '';

      categories.forEach((cat, index) => {
        const scoreItem = document.createElement('div');
        scoreItem.className = 'score-item';
        scoreItem.innerHTML = `
          <h3>${cat.emoji} ${cat.name}</h3>
          <div class="score" style="color: ${cat.color}">${scores[index]}/10</div>
        `;
        scoresList.appendChild(scoreItem);
      });
    }

    function resetForm() {
      document.getElementById('balanceForm').reset();
      document.getElementById('results').classList.remove('show');
      window.scrollTo({ top: 0, behavior: 'smooth' });

      hoveredSector = null;
      lastScores = [];
    }

    window.addEventListener('load', () => {
      const c = document.querySelector('.container');
      c.style.opacity = '0';
      c.style.transform = 'translateY(20px)';

      setTimeout(() => {
        c.style.transition = 'all 0.6s ease';
        c.style.opacity = '1';
        c.style.transform = 'translateY(0)';
      }, 100);
    });
  </script>

</body>
</html>
